// Generated by Haxe 3.4.7
(function ($global) { "use strict";
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var HxOverrides = function() { };
HxOverrides.__name__ = ["HxOverrides"];
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Main = function() { };
Main.__name__ = ["Main"];
Main.main = function() {
	aimjs_Component.registerComponent("test:todo",function() {
		return new component_Todo();
	});
	var hello = new component_Hello();
	hello.attach(window.document.body);
};
Math.__name__ = ["Math"];
var StringTools = function() { };
StringTools.__name__ = ["StringTools"];
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,r,l - r);
	} else {
		return s;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
var aimjs_Model = function() {
	this._binds = null;
};
aimjs_Model.__name__ = ["aimjs","Model"];
aimjs_Model.prototype = {
	getListBindProp: function(field) {
		if(this._binds == null) {
			return null;
		}
		var b = this._binds[field];
		if(b) {
			return b;
		}
		return null;
	}
	,onListPop: function(field,v) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var v1 = props[_g];
			++_g;
			var nodes = v1.nodes.pop();
			if(nodes != null && nodes.length > 0) {
				var _g1 = 0;
				while(_g1 < nodes.length) {
					var node = nodes[_g1];
					++_g1;
					if(node != null && node.parentNode != null) {
						node.parentNode.removeChild(node);
					}
				}
			}
		}
	}
	,onListPush: function(field,index,v) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var nodes = prop.nodes;
			var func = prop.func;
			var isInx = prop.isIndex;
			var parent = prop.parent;
			if(nodes == null) {
				nodes = [];
				prop.nodes = nodes;
			}
			var con = func(isInx ? index : v);
			var tmps = [];
			while(con.firstChild != null) tmps.push(parent.appendChild(con.firstChild));
			nodes.push(tmps);
		}
	}
	,onListReverse: function(field) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var list = prop.nodes;
			if(list != null && list.length > 0) {
				list.reverse();
				var news = [];
				var tmps = [];
				var _g1 = 0;
				while(_g1 < list.length) {
					var nodes = list[_g1];
					++_g1;
					if(nodes != null && nodes.length > 0) {
						var parent = nodes[0].parentNode;
						var con = window.document.createDocumentFragment();
						var _g2 = 0;
						while(_g2 < nodes.length) {
							var node = nodes[_g2];
							++_g2;
							con.appendChild(node);
						}
						tmps.push({ con : con, parent : parent});
					} else {
						tmps.push(null);
					}
				}
				var tmp;
				var _g11 = 0;
				while(_g11 < tmps.length) {
					var item = tmps[_g11];
					++_g11;
					var con1 = item.con;
					var parent1 = item.parent;
					tmp = [];
					while(con1.firstChild != null) tmp.push(parent1.appendChild(con1.firstChild));
					news.push(tmp);
				}
				prop.nodes = news;
			}
		}
	}
	,onListShift: function(field,v) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var list = prop.nodes;
			if(list != null && list.length > 0) {
				var dels = list.shift();
				if(dels != null && dels.length > 0) {
					var _g1 = 0;
					while(_g1 < dels.length) {
						var node = dels[_g1];
						++_g1;
						if(node != null && node.parentNode != null) {
							node.parentNode.removeChild(node);
						}
					}
				}
			}
		}
	}
	,onListSort: function(field,f) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
		}
	}
	,onListSplice: function(field,pos,len,v) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var _list = prop.nodes;
			if(_list != null && _list.length > 0) {
				var dels = _list.splice(pos,len);
				if(dels != null && dels.length > 0) {
					var _g1 = 0;
					while(_g1 < dels.length) {
						var nodes = dels[_g1];
						++_g1;
						var _g2 = 0;
						while(_g2 < nodes.length) {
							var node = nodes[_g2];
							++_g2;
							if(node != null && node.parentNode != null) {
								node.parentNode.removeChild(node);
							}
						}
					}
				}
			}
		}
	}
	,onListUnshift: function(field,x) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var _list = prop.nodes;
			if(_list == null) {
				_list = [];
				prop.nodes = _list;
			}
			var func = prop.func;
			var isInx = prop.isIndex;
			var con = func(isInx ? 0 : x);
			var firstNode = _list.length == 0 ? null : _list[0][0];
			var parent = firstNode != null ? firstNode.parentNode : prop.parent;
			var tmp = [];
			while(con.firstChild != null) tmp.push(parent.insertBefore(con.firstChild,firstNode));
			_list.unshift(tmp);
		}
	}
	,onListInsert: function(field,pos,x) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var _list = prop.nodes;
			if(_list == null) {
				_list = [];
				prop.nodes = _list;
			}
			var func = prop.func;
			var isInx = prop.isIndex;
			var con = func(isInx ? pos : x);
			var posNodes = _list[pos];
			var posNode = posNodes == null || posNodes.length == 0 ? null : _list[pos][0];
			var parent = posNode != null ? posNode.parentNode : prop.parent;
			var tmp = [];
			while(con.firstChild != null) tmp.push(parent.insertBefore(con.firstChild,posNode));
			_list.splice(pos,0,tmp);
		}
	}
	,onListRemove: function(field,inx,x) {
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var prop = props[_g];
			++_g;
			var _list = prop.nodes;
			if(_list != null && _list.length > 0) {
				var dels = _list.splice(inx,1);
				if(dels != null && dels.length > 0) {
					var nodes = dels[0];
					var _g1 = 0;
					while(_g1 < nodes.length) {
						var node = nodes[_g1];
						++_g1;
						if(node != null && node.parentNode != null) {
							node.parentNode.removeChild(node);
						}
					}
				}
			}
		}
	}
	,onListSet: function(field,index,old,v) {
		if(v == old) {
			return;
		}
		var props = this.getListBindProp(field);
		if(props == null) {
			return;
		}
		this.onListRemove(field,index,old);
		this.onListInsert(field,index,v);
	}
	,onListNewValue: function(f,old,cur) {
		if(cur == old) {
			return;
		}
		var props = this.getListBindProp(f);
		if(props == null) {
			return;
		}
		var _g = 0;
		while(_g < props.length) {
			var v = props[_g];
			++_g;
			var nodes = v.nodes;
			if(nodes != null && nodes.length > 0) {
				var _g1 = 0;
				while(_g1 < nodes.length) {
					var _nodes = nodes[_g1];
					++_g1;
					if(_nodes != null && _nodes.length > 0) {
						var _g2 = 0;
						while(_g2 < _nodes.length) {
							var node = _nodes[_g2];
							++_g2;
							if(node.parentNode != null) {
								node.parentNode.removeChild(node);
							}
						}
					}
				}
			}
			nodes = [];
			v.nodes = nodes;
			if(cur != null && cur.length > 0) {
				var func = v.func;
				var isInx = v.isIndex;
				var parent = v.parent;
				var tmps;
				var _g21 = 0;
				var _g11 = cur.length;
				while(_g21 < _g11) {
					var i = _g21++;
					tmps = [];
					var con = func(isInx ? i : cur[i]);
					while(con.firstChild != null) tmps.push(parent.appendChild(con.firstChild));
					nodes.push(tmps);
				}
			}
		}
	}
	,bind: function(field,func) {
		if(this._binds == null) {
			this._binds = { };
		}
		if(!this._binds[field]) {
			this._binds[field] = [];
		}
		this._binds[field].push(func);
	}
	,bindSeq: function(field,nodes,func,isIndex,parent) {
		if(this._binds == null) {
			this._binds = { };
		}
		if(!this._binds[field]) {
			this._binds[field] = [];
		}
		this._binds[field].push({ nodes : nodes, func : func, isIndex : isIndex, parent : parent});
	}
	,onNewValue: function(f,old,cur) {
		if(this._binds == null) {
			return;
		}
		var b = this._binds[f];
		if(b) {
			var _g1 = 0;
			var _g = b.length;
			while(_g1 < _g) {
				var i = _g1++;
				b[i](old,cur);
			}
		}
	}
	,__class__: aimjs_Model
};
var TodoModel = function() {
	this.thing = "nothing";
	this.name = null;
	aimjs_Model.call(this);
};
TodoModel.__name__ = ["TodoModel"];
TodoModel.__super__ = aimjs_Model;
TodoModel.prototype = $extend(aimjs_Model.prototype,{
	set_name: function(v) {
		var old = this.name;
		this.name = v;
		this.onNewValue("name",old,v);
		return v;
	}
	,set_thing: function(v) {
		var old = this.thing;
		this.thing = v;
		this.onNewValue("thing",old,v);
		return v;
	}
	,__class__: TodoModel
});
var Type = function() { };
Type.__name__ = ["Type"];
Type.getClassName = function(c) {
	var a = c.__name__;
	if(a == null) {
		return null;
	}
	return a.join(".");
};
var aimjs__$BindArray_BindArray_$Impl_$ = {};
aimjs__$BindArray_BindArray_$Impl_$.__name__ = ["aimjs","_BindArray","BindArray_Impl_"];
aimjs__$BindArray_BindArray_$Impl_$._new = function(a) {
	var this1 = a;
	return this1;
};
aimjs__$BindArray_BindArray_$Impl_$.setBind = function(this1,field,parent) {
	this1.__f = field;
	this1.__c = parent;
};
aimjs__$BindArray_BindArray_$Impl_$.pop = function(this1) {
	var v = this1.pop();
	if(this1.__f) {
		this1.__c.onListPop(this1.__f,v);
	}
	return v;
};
aimjs__$BindArray_BindArray_$Impl_$.push = function(this1,x) {
	var i = this1.push(x);
	if(this1.__f) {
		this1.__c.onListPush(this1.__f,i - 1,x);
	}
	return i;
};
aimjs__$BindArray_BindArray_$Impl_$.reverse = function(this1) {
	if(this1.length <= 1) {
		return;
	}
	this1.reverse();
	if(this1.__f) {
		this1.__c.onListReverse(this1.__f);
	}
};
aimjs__$BindArray_BindArray_$Impl_$.shift = function(this1) {
	var v = this1.shift();
	if(this1.__f) {
		this1.__c.onListShift(this1.__f,v);
	}
	return v;
};
aimjs__$BindArray_BindArray_$Impl_$.sort = function(this1,f) {
	this1.sort(f);
	if(this1.__f) {
		this1.__c.onListSort(this1.__f,f);
	}
};
aimjs__$BindArray_BindArray_$Impl_$.splice = function(this1,pos,len) {
	var v = this1.splice(pos,len);
	if(this1.__f) {
		this1.__c.onListSplice(this1.__f,pos,len,v);
	}
	return v;
};
aimjs__$BindArray_BindArray_$Impl_$.unshift = function(this1,x) {
	this1.unshift(x);
	if(this1.__f) {
		this1.__c.onListUnshift(this1.__f,x);
	}
};
aimjs__$BindArray_BindArray_$Impl_$.insert = function(this1,pos,x) {
	this1.splice(pos,0,x);
	if(this1.__f) {
		this1.__c.onListInsert(this1.__f,pos,x);
	}
};
aimjs__$BindArray_BindArray_$Impl_$.remove = function(this1,x) {
	var inx = this1.indexOf(x);
	if(inx == -1) {
		return false;
	}
	var r = this1.splice(inx,1);
	var v = r != null && r.length > 0;
	if(v && this1.__f) {
		this1.__c.onListRemove(this1.__f,inx,x);
	}
	return v;
};
aimjs__$BindArray_BindArray_$Impl_$.get = function(this1,i) {
	return this1[i];
};
aimjs__$BindArray_BindArray_$Impl_$.set = function(this1,i,v) {
	var old = this1[i];
	this1[i] = v;
	if(this1.__f) {
		this1.__c.onListSet(this1.__f,i,old,v);
	}
	return v;
};
var aimjs_Component = function() {
	this._root = null;
	this._doc = null;
	this.isAttached = false;
	this.objectId = 0;
	aimjs_Model.call(this);
	aimjs_Component.__obj_id++;
	this.objectId = aimjs_Component.__obj_id;
	aimjs_Component.__components[this.objectId] = this;
	this.className = Type.getClassName(js_Boot.getClass(this));
};
aimjs_Component.__name__ = ["aimjs","Component"];
aimjs_Component.registerComponent = function(tag,creater) {
	aimjs_Component.tags[tag] = creater;
};
aimjs_Component.createComponent = function(tag) {
	var creater = aimjs_Component.tags[tag];
	if(creater == null) {
		return null;
	}
	return creater();
};
aimjs_Component.setGlobalObj = function(name,obj) {
	var g = $global;
	if(!g.aimjs) {
		g.aimjs = { };
	}
	g.aimjs[name] = obj;
};
aimjs_Component.getGlobalObj = function(name) {
	var g = $global;
	if(!g.aimjs) {
		return null;
	}
	var obj = g.aimjs[name];
	if(obj) {
		return obj;
	}
	return null;
};
aimjs_Component.removeLocalObj = function(name) {
	var g = $global;
	if(!g.aimjs) {
		return;
	}
	delete g.aimjs[name];
};
aimjs_Component.getObjectId = function(node) {
	return node.__aim_objid;
};
aimjs_Component.getComponent = function(objectId) {
	if(objectId <= 0) {
		return null;
	}
	if(objectId > aimjs_Component.__components.length) {
		return null;
	}
	var component = aimjs_Component.__components[objectId];
	if(component == undefined) {
		return null;
	}
	return component;
};
aimjs_Component.getOwnComponent = function(node) {
	var objId = node.__aim_objid;
	if(objId == undefined || objId == null) {
		return null;
	}
	return aimjs_Component.getComponent(objId);
};
aimjs_Component.__super__ = aimjs_Model;
aimjs_Component.prototype = $extend(aimjs_Model.prototype,{
	set_doc: function(v) {
		this._doc = v;
		return v;
	}
	,get_doc: function() {
		if(this.isAttached && this._doc == this.localDoc) {
			this._doc = window.document;
		}
		return this._doc;
	}
	,set_root: function(v) {
		this._root = v;
		return v;
	}
	,get_root: function() {
		if(this._root == null) {
			return this.localDoc;
		}
		if(this.isAttached && this.parent != null && this._root instanceof DocumentFragment) {
			this._root = this.parent.get_root();
		}
		return this._root;
	}
	,getRealRoot: function() {
		if(this._root == null) {
			return this.localDoc;
		}
		var curRoot = this._root;
		if(this.parent != null && curRoot instanceof DocumentFragment) {
			curRoot = this.parent.getRealRoot();
		}
		return curRoot;
	}
	,onViewInit: function() {
	}
	,attach: function(root) {
		if(this.isAttached) {
			this.unattach();
		}
		this._root = root;
		if(this._doc == null) {
			this.localDoc = window.document.createDocumentFragment();
			this._doc = this.localDoc;
			this.render();
			this.onViewInit();
		}
		this._root.appendChild(this.localDoc);
		this.isAttached = true;
	}
	,unattach: function() {
		if(!this.isAttached) {
			return;
		}
		var nodes = window.document.body.childNodes;
		var len = nodes.length;
		var node;
		var i = 0;
		while(i < len) {
			node = nodes[i];
			if(node.__aim_objid == this.objectId) {
				this.localDoc.appendChild(node);
				--len;
			} else {
				++i;
			}
		}
		this.isAttached = false;
		if(this.parent != null) {
			this.parent.remove(this);
			this.parent = null;
		}
		this._root = null;
		this._doc = this.localDoc;
	}
	,destroy: function() {
		this.unattach();
		aimjs_Component.__components.splice(this.objectId,1);
	}
	,remove: function(child) {
	}
	,render: function() {
	}
	,setGlobalLocalObj: function(name,obj) {
		var g = $global;
		if(!g.aimjs) {
			g.aimjs = { };
		}
		if(!g.aimjs["com" + this.objectId]) {
			g.aimjs["com" + this.objectId] = { };
		}
		g.aimjs["com" + this.objectId][name] = obj;
	}
	,getGlobalLocalObj: function(name) {
		var g = $global;
		if(!g.aimjs) {
			return null;
		}
		if(!g.aimjs["com" + this.objectId]) {
			return null;
		}
		var obj = g.aimjs["com" + this.objectId][name];
		if(obj) {
			return obj;
		}
		return null;
	}
	,removeGlobalLocalObj: function(name) {
		var g = $global;
		if(!g.aimjs) {
			return;
		}
		if(!g.aimjs["com" + this.objectId]) {
			return;
		}
		delete g.aimjs["com" + this.objectId][name];
	}
	,clearGlobalLocalObj: function() {
		var g = $global;
		if(!g.aimjs) {
			return;
		}
		if(!g.aimjs["com" + this.objectId]) {
			return;
		}
		delete g.aimjs["com" + this.objectId];
	}
	,Txt: function(data) {
		var text = window.document.createTextNode(data);
		text.__aim_objid = this.objectId;
		return text;
	}
	,Ele: function(localName,isOnly) {
		if(isOnly == null) {
			isOnly = false;
		}
		var ele = window.document.createElement(localName);
		if(!isOnly) {
			ele.__aim_objid = this.objectId;
		}
		return ele;
	}
	,hasOnlyNodeExist: function(name) {
		var tags = aimjs_Component.getGlobalObj("__tags__");
		var obj = tags[this.className];
		if(!obj) {
			return false;
		}
		var v = obj[name];
		if(!v) {
			return false;
		}
		return v;
	}
	,recordOnlyNode: function(name) {
		var tags = aimjs_Component.getGlobalObj("__tags__");
		if(!tags[this.className]) {
			tags[this.className] = { };
		}
		tags[this.className][name] = true;
	}
	,__class__: aimjs_Component
});
var component_Hello = function() {
	this.name = "hello";
	aimjs_Component.call(this);
	this.set_list([]);
};
component_Hello.__name__ = ["component","Hello"];
component_Hello.__super__ = aimjs_Component;
component_Hello.prototype = $extend(aimjs_Component.prototype,{
	get_name: function() {
		return this.name;
	}
	,set_name: function(v) {
		var old = this.name;
		this.name = v;
		this.onNewValue("name",old,v);
		return v;
	}
	,set_list: function(v) {
		var old = this.list;
		this.list = v;
		this.onListNewValue("list",old,v);
		v.__f = "list";
		v.__c = this;
		return v;
	}
	,getMessage: function() {
		return "message";
	}
	,click: function() {
		this.set_name("click");
	}
	,render: function() {
		var _gthis = this;
		aimjs_Component.prototype.render.call(this);
		var $window = window;
		var document = $window.document;
		var location = window.location;
		var navigator = window.navigator;
		var $console = window.console;
		var con = this.localDoc;
		var __0 = this.Txt(this.name);
		con.appendChild(__0);
		this.bind("name",function(old,cur) {
			__0.textContent = cur;
		});
		var __1 = this.Txt(" world\r\ncomponent-Hello\r\n  ");
		con.appendChild(__1);
		var __prev2 = con;
		var __2 = this.Ele("div");
		con.appendChild(__2);
		con = __2;
		var __prev3 = con;
		var btn = this.Ele("button");
		btn.setAttribute("id","btn");
		con.appendChild(btn);
		con = btn;
		var __4 = this.Txt("hello btn");
		con.appendChild(__4);
		con = __prev3;
		con = __prev2;
		var f = function(i) {
			if(i % 2 == 0) {
				return "偶数";
			}
			return "奇数";
		};
		var __prev5 = con;
		var __5 = this.Ele("div");
		con.appendChild(__5);
		con = __5;
		var __f_1 = function(i1) {
			var con1 = document.createDocumentFragment();
			var topCon = con1;
			var __prev6 = con1;
			var __6 = _gthis.Ele("li");
			con1.appendChild(__6);
			con1 = __6;
			var __7 = _gthis.Txt(i1);
			con1.appendChild(__7);
			var __8 = _gthis.Txt(" : ");
			con1.appendChild(__8);
			var __9 = _gthis.Txt(f(i1));
			con1.appendChild(__9);
			con1 = __prev6;
			var __prev10 = con1;
			var __10 = _gthis.Ele("a");
			__10.setAttribute("href","#");
			con1.appendChild(__10);
			con1 = __10;
			var __11 = _gthis.Txt(i1);
			con1.appendChild(__11);
			con1 = __prev10;
			return topCon;
		};
		if(this.li_list == null) {
			this.li_list = [];
		}
		var __tmp_l;
		var i2 = HxOverrides.iter(this.list);
		while(i2.hasNext()) {
			var i3 = i2.next();
			var __tmp_con = __f_1(i3);
			__tmp_l = [];
			while(__tmp_con.firstChild != null) __tmp_l.push(con.appendChild(__tmp_con.firstChild));
			this.li_list.push(__tmp_l);
		}
		this.bindSeq("list",this.li_list,__f_1,false,con == this.localDoc ? this.getRealRoot() : con);
		con = __prev5;
		var test = this.Ele("div");
		test.setAttribute("id","component-Hello1");
		test.setAttribute("name","name:" + this.name + "hello" + " jjjj;" + (this.name.length >= 2 ? "大于等于2" : "小于2"));
		this.bind("name",function(old1,cur1) {
			test.setAttribute("name","name:" + _gthis.name + "hello" + " jjjj;" + (_gthis.name.length >= 2 ? "大于等于2" : "小于2"));
		});
		con.appendChild(test);
		var __13 = aimjs_Component.createComponent("test:todo");
		__13.parent = this;
		__13.attach(con);
		var __prev14 = con;
		var __14 = this.Ele("p");
		con.appendChild(__14);
		con = __14;
		var __15 = aimjs_Component.createComponent("test:todo");
		__15.parent = this;
		__15.attach(con);
		con = __prev14;
		var i4 = 0;
		btn.onclick = function() {
			i4 += 1;
			_gthis.set_name(i4 == null ? "null" : "" + i4);
			aimjs__$BindArray_BindArray_$Impl_$.push(_gthis.list,i4);
			$window.console.log(test.getAttribute("name"));
			_gthis.unattach();
			$window.setTimeout(function() {
				_gthis.attach(document.body);
			},3000);
		};
	}
	,__class__: component_Hello
});
var component_Todo = function() {
	aimjs_Component.call(this);
	this.set_list([]);
};
component_Todo.__name__ = ["component","Todo"];
component_Todo.__super__ = aimjs_Component;
component_Todo.prototype = $extend(aimjs_Component.prototype,{
	set_list: function(v) {
		var old = this.list;
		this.list = v;
		this.onListNewValue("list",old,v);
		aimjs__$BindArray_BindArray_$Impl_$.setBind(this.list,"list",this);
		return v;
	}
	,onDel: function(e) {
		var aNode = e.target;
		console.log(aNode);
		var top = aNode;
		while(top.getAttribute("row") != "todo" && top.parentElement != null) top = top.parentElement;
		if(top == aNode || top.getAttribute("row") != "todo") {
			return;
		}
		var _g1 = 0;
		var _g = this.todoNodes.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.todoNodes[i][0] == top) {
				aimjs__$BindArray_BindArray_$Impl_$.splice(this.list,i,1);
				break;
			}
		}
	}
	,onModify: function(e) {
		var aNode = e.target;
		var top = aNode;
		while(top.getAttribute("row") != "todo" && top.parentElement != null) top = top.parentElement;
		if(top == aNode || top.getAttribute("row") != "todo") {
			return;
		}
		var _g1 = 0;
		var _g = this.todoNodes.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.todoNodes[i][0] == top) {
				var input = top.getElementsByTagName("input").item(0);
				aimjs__$BindArray_BindArray_$Impl_$.get(this.list,i).set_name(input.value);
				break;
			}
		}
	}
	,onAdd: function() {
		var v = this.input.value;
		if(StringTools.trim(v).length == 0) {
			window.alert("请输入todo事项");
			return;
		}
		var todo = new TodoModel();
		todo.set_name(v);
		aimjs__$BindArray_BindArray_$Impl_$.push(this.list,todo);
	}
	,render: function() {
		var _gthis = this;
		aimjs_Component.prototype.render.call(this);
		var $window = window;
		var document = $window.document;
		var location = window.location;
		var navigator = window.navigator;
		var $console = window.console;
		var con = this.localDoc;
		if(!this.hasOnlyNodeExist("__0")) {
			var __prev0 = con;
			var __0 = this.Ele("style",true);
			con.appendChild(__0);
			con = __0;
			var __1 = this.Txt("\r\nbutton {color: red;}\r\n");
			con.appendChild(__1);
			con = __prev0;
			this.recordOnlyNode("__0");
		}
		if(this.input == null) {
			this.input = this.Ele("input");
		}
		this.input.setAttribute("type","text");
		con.appendChild(this.input);
		var __prev3 = con;
		var btn = this.Ele("button");
		con.appendChild(btn);
		con = btn;
		var __4 = this.Txt("添加");
		con.appendChild(__4);
		con = __prev3;
		var __prev5 = con;
		var __5 = this.Ele("div");
		con.appendChild(__5);
		con = __5;
		var __f_1 = function(i) {
			var con1 = document.createDocumentFragment();
			var topCon = con1;
			var __prev6 = con1;
			var __6 = _gthis.Ele("div");
			__6.setAttribute("row","todo");
			con1.appendChild(__6);
			con1 = __6;
			var __prev7 = con1;
			var __7 = _gthis.Ele("span");
			con1.appendChild(__7);
			con1 = __7;
			var __prev8 = con1;
			var __8 = _gthis.Ele("li");
			con1.appendChild(__8);
			con1 = __8;
			var __9 = _gthis.Txt(i);
			con1.appendChild(__9);
			var __10 = _gthis.Txt(":");
			con1.appendChild(__10);
			var __11 = _gthis.Txt(aimjs__$BindArray_BindArray_$Impl_$.get(_gthis.list,i).name);
			con1.appendChild(__11);
			aimjs__$BindArray_BindArray_$Impl_$.get(_gthis.list,i).bind("name",function(old,cur) {
				__11.textContent = cur;
			});
			var __12 = _gthis.Txt(aimjs__$BindArray_BindArray_$Impl_$.get(_gthis.list,i).thing);
			con1.appendChild(__12);
			con1 = __prev8;
			var __prev13 = con1;
			var __13 = _gthis.Ele("a");
			__13.setAttribute("href","javascript:void(0);");
			__13.onclick = $bind(_gthis,_gthis.onDel);
			con1.appendChild(__13);
			con1 = __13;
			var __14 = _gthis.Txt("删除");
			con1.appendChild(__14);
			con1 = __prev13;
			var __15 = _gthis.Ele("input");
			__15.setAttribute("type","text");
			__15.setAttribute("value",aimjs__$BindArray_BindArray_$Impl_$.get(_gthis.list,i).name);
			con1.appendChild(__15);
			var __prev16 = con1;
			var __16 = _gthis.Ele("a");
			__16.setAttribute("href","javascript:void(0);");
			__16.onclick = $bind(_gthis,_gthis.onModify);
			con1.appendChild(__16);
			con1 = __16;
			var __17 = _gthis.Txt("修改");
			con1.appendChild(__17);
			con1 = __prev16;
			con1 = __prev7;
			con1 = __prev6;
			return topCon;
		};
		if(this.todoNodes == null) {
			this.todoNodes = [];
		}
		var __tmp_l;
		var _g1 = 0;
		var _g = this.list.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			var __tmp_con = __f_1(i1);
			__tmp_l = [];
			while(__tmp_con.firstChild != null) __tmp_l.push(con.appendChild(__tmp_con.firstChild));
			this.todoNodes.push(__tmp_l);
		}
		this.bindSeq("list",this.todoNodes,__f_1,true,con == this.localDoc ? this.getRealRoot() : con);
		con = __prev5;
		btn.onclick = $bind(this,this.onAdd);
	}
	,__class__: component_Todo
});
var js_Boot = function() { };
js_Boot.__name__ = ["js","Boot"];
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
String.prototype.__class__ = String;
String.__name__ = ["String"];
Array.__name__ = ["Array"];
aimjs_Component.setGlobalObj("getComponent",aimjs_Component.getComponent);
aimjs_Component.setGlobalObj("getOwnComponent",aimjs_Component.getOwnComponent);
aimjs_Component.setGlobalObj("__tags__",{ });
aimjs_Component.__obj_id = 0;
aimjs_Component.tags = (function($this) {
	var $r;
	var this1 = { };
	$r = this1;
	return $r;
}(this));
aimjs_Component.__components = [];
js_Boot.__toStr = ({ }).toString;
Main.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
